<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Cineast</title>
		<!-- Tailwind v4 (CDN) -->
		<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
		<!-- Alpine.js -->
		<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
		<link rel="stylesheet" href="./css/fonts.css" />
		<link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
		<script src="components/navigation.js"></script>
		<style>
			html {
				scroll-behavior: smooth;
			}
		</style>
	</head>
	<body class="font-montserrat bg-white text-black">
		<!-- Keep user's web component -->
		<top-navigation></top-navigation>
		<!-- PAGE WRAPPER -->
		<main class="min-h-screen bg-gradient-to-b from-white to-gray-50">
			<!-- HERO / HEADER STRIP -->
			<section class="relative overflow-hidden">
				<div class="absolute inset-0 -z-10 bg-gradient-to-b from-white/10 via-white/60 to-white"></div>
				<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-10 pb-8">
					<!-- Title + Popularity -->
					<div class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4">
						<div class="w-full">
							<h1 id="movie-title" class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight">Title</h1>
							<div id="movie-info" class="mt-2 flex flex-wrap items-center gap-2 sm:gap-4 text-gray-600 font-medium">
								<span>Year</span>
								<span>•</span>
								<span>Rating</span>
								<span>•</span>
								<span>Runtime</span>
							</div>
						</div>
						<div class="flex items-center gap-3">
							<span class="inline-flex items-center rounded-md bg-green-500 text-white text-xs font-semibold px-2.5 py-1 shadow">
								<span id="movie-popularity">--</span>
							</span>
							<span class="text-[11px] text-gray-600">POPULARITY</span>
						</div>
					</div>
				</div>
			</section>
			<!-- CONTENT GRID -->
			<section class="relative">
				<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
					<div class="grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8">
						<!-- LEFT COLUMN: Poster + Side Images (sticky on desktop) -->
						<aside class="lg:col-span-4 space-y-4 lg:sticky lg:top-20 self-start">
							<!-- Big Poster -->
							<figure class="overflow-hidden rounded-2xl shadow-lg bg-gray-100">
								<img id="hero-image" src="https://placehold.co/1000x500" alt="Movie Poster" class="w-full h-[360px] sm:h-[420px] object-cover">
							</figure>
							<!-- Side images (auto orientation) -->
							<div id="side-images" class="grid grid-cols-2 gap-3">
								<img src="https://placehold.co/500x250" class="w-full h-40 object-cover rounded-lg shadow" />
								<img src="https://placehold.co/500x250" class="w-full h-40 object-cover rounded-lg shadow" />
							</div>
							<!-- Quick facts card -->
							<div class="rounded-2xl border border-gray-200 bg-white p-4 shadow-sm">
								<h3 class="text-sm font-semibold text-gray-900 mb-3">Quick Facts</h3>
								<dl class="grid grid-cols-2 gap-3 text-sm">
									<div>
										<dt class="text-gray-500">Released</dt>
										<dd id="fact-released" class="font-medium text-gray-900">—</dd>
									</div>
									<div>
										<dt class="text-gray-500">Language</dt>
										<dd id="fact-language" class="font-medium text-gray-900">—</dd>
									</div>
									<div>
										<dt class="text-gray-500">Genre</dt>
										<dd id="fact-genre" class="font-medium text-gray-900 truncate">—</dd>
									</div>
									<div>
										<dt class="text-gray-500">IMDB</dt>
										<dd id="fact-imdb" class="font-medium text-gray-900">—</dd>
									</div>
								</dl>
							</div>
						</aside>
						<!-- RIGHT COLUMN: Details -->
						<div class="lg:col-span-8 space-y-8">
							<!-- Genres & Plot -->
							<section class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
								<div id="movie-genres" class="flex flex-wrap gap-2 mb-4">
									<span class="px-4 py-1 bg-gray-800 rounded-full text-sm text-gray-300">Genre</span>
								</div>
								<p id="movie-plot" class="text-base sm:text-lg leading-7 text-gray-800"> Plot... </p>
							</section>
							<!-- Credits -->
							<section class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
								<div class="space-y-4">
									<div class="flex flex-col sm:flex-row gap-2 sm:items-center">
										<span class="font-semibold">Director:</span>
										<div id="movie-directors" class="flex flex-wrap gap-2">
											<span class="text-blue-500 hover:underline cursor-pointer">Name</span>
										</div>
									</div>
									<div class="flex flex-col sm:flex-row gap-2 sm:items-center">
										<span class="font-semibold">Stars:</span>
										<div id="movie-actors" class="flex flex-wrap gap-2">
											<span class="text-blue-500 hover:underline cursor-pointer">Actor</span>
										</div>
									</div>
								</div>
							</section>
							<!-- Trailer -->
							<section id="trailer-section" class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hidden">
								<h2 class="text-xl font-bold mb-3">Watch Trailer</h2>
								<div class="aspect-w-16 aspect-h-9 rounded-xl overflow-hidden shadow">
									<iframe id="movie-trailer" class="w-full h-[400px]" allowfullscreen></iframe>
								</div>
							</section>
							<!-- Tabs: Photos / Cast -->
							<section class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
								<div x-data="{ tab: 'photos' }">
									<div class="flex items-center gap-2">
										<button @click="tab='photos'" :class="tab==='photos' ? 'bg-gray-900 text-white' : 'bg-white text-gray-800'" class="px-4 py-2 rounded-full border border-gray-300 shadow-sm text-sm"> Photos </button>
										<button @click="tab='cast'" :class="tab==='cast' ? 'bg-gray-900 text-white' : 'bg-white text-gray-800'" class="px-4 py-2 rounded-full border border-gray-300 shadow-sm text-sm"> Cast </button>
									</div>
									<!-- Photos Grid -->
									<div x-show="tab==='photos'" x-transition class="mt-6">
										<div id="movie-photos" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4">
											<!-- populated by JS -->
										</div>
									</div>
									<!-- Cast Grid -->
									<div x-show="tab==='cast'" x-transition class="mt-6">
										<div id="movie-cast" class="grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 gap-6">
											<!-- populated by JS -->
										</div>
									</div>
								</div>
							</section>
							<!-- Comments (display-only) -->
							<section class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm" x-data="commentFeed()" x-init="seed()">
								<h2 class="text-xl font-bold mb-4">Comments</h2>
								<div class="space-y-5">
									<template x-for="(c, i) in comments" :key="i">
										<article class="bg-gray-50 p-4 rounded-xl border border-gray-200">
											<div class="flex items-start gap-3">
												<div class="h-10 w-10 rounded-full bg-gray-900 text-white flex items-center justify-center text-sm font-semibold select-none">
													<span x-text="c.initials"></span>
												</div>
												<div class="flex-1">
													<div class="flex items-center justify-between gap-2">
														<h3 class="font-semibold text-gray-900" x-text="c.name"></h3>
														<span class="text-xs text-gray-500" x-text="c.time"></span>
													</div>
													<p class="mt-1 text-gray-700" x-text="c.text"></p>
												</div>
											</div>
										</article>
									</template>
								</div>
							</section>
						</div>
					</div>
				</div>
			</section>
		</main>
		<!-- Comments Alpine component (randomized, display-only) -->
		<script>
			function commentFeed() {
				return {
					comments: [],
					seed() {
						const names = ["Alex Rivera", "Jamie Chen", "Priya N.", "Marcus Lee", "Sofia Delgado", "Ibrahim K.", "Chloe Park", "Diego Alvarez", "Mina Patel", "Tomás Reyes", "Ella Brooks", "Hiro Tanaka"];
						const texts = ["Loved the cinematography — some shots were stunning.", "Solid performances all around. The soundtrack was a vibe.", "Pacing dipped in the middle, but the finale made up for it.", "Not perfect, but definitely worth a watch with friends.", "The lead absolutely carried this. Award-worthy!", "Plot twists kept me guessing right up to the end.", "I wish the runtime were 20 minutes shorter, but still good.", "Production design was top-tier. Immersive world-building.", "Dialogue felt natural; the humor landed for me.", "I didn't expect to enjoy it this much — pleasant surprise!"];
						const count = Math.floor(Math.random() * 4) + 5; // 5–8 comments
						for (let i = 0; i < count; i++) {
							const name = names[Math.floor(Math.random() * names.length)];
							const text = texts[Math.floor(Math.random() * texts.length)];
							const daysAgo = Math.floor(Math.random() * 30);
							const date = new Date();
							date.setDate(date.getDate() - daysAgo);
							const initials = name.split(" ").map(w => w[0]).join("").toUpperCase().slice(0, 2);
							this.comments.push({
								name,
								text,
								time: date.toLocaleString(),
								initials
							});
						}
					}
				};
			}
		</script>
		<!-- Orientation helpers -->
		<script>
			function styleImageByOrientation(img, variant = 'side') {
				const isPortrait = img.naturalHeight > img.naturalWidth;
				const common = "rounded-lg shadow";
				// Side images
				const sideLandscape = "w-full h-40 sm:h-48 md:h-56 lg:h-48 xl:h-60 object-cover " + common;
				const sidePortrait = "w-full h-60 sm:h-64 md:h-72 lg:h-64 xl:h-72 object-contain bg-gray-100 p-1 " + common;
				// Photo grid
				const photoLandscape = "w-full h-56 object-cover rounded-lg shadow";
				const photoPortrait = "w-full h-72 object-contain bg-gray-100 p-2 rounded-lg shadow";
				if (variant === 'side') {
					img.className = isPortrait ? sidePortrait : sideLandscape;
				} else if (variant === 'photo') {
					img.className = isPortrait ? photoPortrait : photoLandscape;
				}
			}
		</script>
		<!-- Dynamic data fetch (kept), with orientation-aware images + quick facts -->
		<script>
			document.addEventListener("DOMContentLoaded", async () => {
							const params = new URLSearchParams(window.location.search);
							const filename = params.get("id");
							if (!filename) return console.error("Missing ?id parameter");
							try {
								const res = await fetch(`movies_data/${filename}`);
								if (!res.ok) throw new Error("Movie data not found");
								const movie = await res.json();
								// --- Title & Meta ---
								document.getElementById("movie-title").textContent = movie.Title;
								document.getElementById("movie-info").innerHTML = `
          
				<span>${movie.Year || "N/A"}</span>
				<span>•</span>
				<span>${movie.Rated || "N/A"}</span>
				<span>•</span>
				<span>${movie.Runtime || "N/A"}</span>`;
								document.getElementById("movie-popularity").textContent = movie.TMDb_Rating ? (movie.TMDb_Rating * 10).toFixed(0) : "--";
								// --- Poster ---
								document.getElementById("hero-image").src = movie.Poster_TMDb || movie.Poster_OMDb;
								// --- Side Images (orientation-aware) ---
								const side = document.getElementById("side-images");
								side.innerHTML = "";
								(movie.Backdrops?.slice(1, 3) || []).forEach(src => {
									const el = document.createElement("img");
									el.alt = "Backdrop";
									el.loading = "lazy";
									el.src = src;
									if (el.complete) styleImageByOrientation(el, "side");
									else el.addEventListener("load", () => styleImageByOrientation(el, "side"));
									side.appendChild(el);
								});
								// --- Genres ---
								const genres = movie.Genre?.split(",") || [];
								const genreContainer = document.getElementById("movie-genres");
								genreContainer.innerHTML = "";
								genres.forEach(g => {
									const span = document.createElement("span");
									span.className = "px-4 py-1 bg-gray-800 rounded-full text-sm text-gray-300";
									span.textContent = g.trim();
									genreContainer.appendChild(span);
								});
								// --- Plot ---
								document.getElementById("movie-plot").textContent = movie.Plot;
								// --- Credits ---
								const directorsContainer = document.getElementById("movie-directors");
								directorsContainer.innerHTML = (movie.Directors || []).map(d => `
				<span class="text-blue-500 hover:underline cursor-pointer">${d}</span>`).join(" ");
									const actorsContainer = document.getElementById("movie-actors");
									const actors = movie.Actors?.split(",") || []; actorsContainer.innerHTML = actors.map(a => `
				<span class="text-blue-500 hover:underline cursor-pointer">${a.trim()}</span>`).join(" ");
										// --- Quick Facts fill-ins ---
										document.getElementById("fact-released").textContent = movie.Released || "—"; document.getElementById("fact-language").textContent = movie.Language || "—"; document.getElementById("fact-genre").textContent = movie.Genre || "—"; document.getElementById("fact-imdb").textContent = movie.imdbRating || "—";
										// --- Trailer ---
										if (movie.Trailer) {
											const trailer = document.getElementById("movie-trailer");
											document.getElementById("trailer-section").classList.remove("hidden");
											const videoId = movie.Trailer.includes("v=") ? movie.Trailer.split("v=")[1].split("&")[0] : movie.Trailer.split("/").pop();
											trailer.src = `https://www.youtube.com/embed/${videoId}`;
										}
										// --- Photos (orientation-aware) ---
										const photos = document.getElementById("movie-photos"); photos.innerHTML = "";
										(movie.Backdrops || []).forEach(src => {
											const wrapper = document.createElement("div");
											const img = document.createElement("img");
											img.alt = "Photo";
											img.loading = "lazy";
											img.src = src;
											if (img.complete) styleImageByOrientation(img, "photo");
											else img.addEventListener("load", () => styleImageByOrientation(img, "photo"));
											wrapper.appendChild(img);
											photos.appendChild(wrapper);
										});
										// --- Cast ---
										const cast = document.getElementById("movie-cast"); cast.innerHTML = "";
										(movie.Cast || []).forEach(actor => {
											const div = document.createElement("div");
											div.className = "flex flex-col items-center";
											div.innerHTML = `
            
				<img src="${actor.profile_url || 'https://placehold.co/150x150'}"
                 alt="${actor.name}" class="w-36 h-36 object-cover rounded-full mb-3 shadow">
					<p class="font-semibold text-center">${actor.name}</p>
					<p class="text-sm text-gray-500 text-center">${actor.character || ''}</p>`;
											cast.appendChild(div);
										});
									}
									catch (err) {
										console.error("Error loading movie:", err);
									}
								});
		</script>
	</body>
</html>