<!DOCTYPE html>
<html lang="en" data-theme="light">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Cineast - Actors</title>
		<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.12/dist/full.min.css" rel="stylesheet" type="text/css" />
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="components/navigation.js"></script>
	</head>
	<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">
		<top-navigation></top-navigation>
		<main class="flex-1 container mx-auto px-6 py-10">
			<h2 class="text-3xl font-bold mb-8">Popular Actors</h2>
			<div id="actors-grid" class="grid gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5"></div>
			<div id="loading" class="flex justify-center py-10">
				<span class="loading loading-spinner loading-lg text-gray-500"></span>
			</div>
		</main>
		<!-- =============================== -->
		<!-- ðŸŽ­ ACTOR MODAL -->
		<!-- =============================== -->
		<div id="actor-modal" class="fixed inset-0 bg-black/60 hidden z-50 items-center justify-center">
			<div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-[90%] max-h-[90vh] overflow-y-auto relative p-6 animate-fade-in">
				<button id="close-actor-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-3xl leading-none"> &times; </button>
				<div id="actor-loading" class="flex justify-center items-center py-10">
					<span class="loading loading-spinner loading-lg text-gray-400"></span>
				</div>
				<div id="actor-content" class="hidden flex flex-col md:flex-row gap-8">
					<img id="actor-image" src="" alt="Actor photo" class="w-56 h-72 md:w-60 md:h-80 object-cover rounded-xl shadow-md flex-shrink-0 bg-gray-100" />
					<div class="flex-1 space-y-3">
						<h2 id="actor-name" class="text-2xl font-bold text-gray-900"></h2>
						<p id="actor-birth" class="text-sm text-gray-600"></p>
						<p id="actor-place" class="text-sm text-gray-600"></p>
						<p id="actor-bio" class="text-gray-700 text-justify text-sm leading-6"></p>
						<div>
							<h3 class="font-semibold text-lg mb-2 text-gray-900">Known For</h3>
							<div id="actor-known" class="flex flex-wrap gap-2"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<style>
			@keyframes fade-in {
				from {
					opacity: 0;
					transform: scale(0.95);
				}

				to {
					opacity: 1;
					transform: scale(1);
				}
			}

			.animate-fade-in {
				animation: fade-in 0.2s ease-out forwards;
			}
		</style>
		<!-- =============================== -->
		<!-- âš™ï¸ SCRIPT -->
		<!-- =============================== -->
		<script>
			const TMDB_API_KEY = "282771c1a7fde740363584fc69fb1227"; // Replace this with your TMDb key
			const actorsGrid = document.getElementById("actors-grid");
			const loading = document.getElementById("loading");
			async function fetchActors() {
				loading.classList.remove("hidden");
				try {
					let actors = [];
					for (let page = 1; page <= 5; page++) {
						const response = await fetch(`https://api.themoviedb.org/3/person/popular?api_key=${TMDB_API_KEY}&page=${page}`);
						if (!response.ok) throw new Error("Failed to fetch page " + page);
						const data = await response.json();
						if (!data.results) throw new Error("No results field in TMDb response");
						actors.push(...data.results);
					}
					actors = actors.slice(0, 100);
					displayActors(actors);
				} catch (error) {
					console.error("Fetch error:", error);
					actorsGrid.innerHTML = `
			<p class="text-gray-500 text-center w-full">Failed to load actors. Please check your API key or try again later.</p>`;
				} finally {
					loading.classList.add("hidden");
				}
			}

			function displayActors(actors) {
				actorsGrid.innerHTML = actors.map(actor => `
          
			<div class="bg-white border border-gray-200 rounded-xl overflow-hidden hover:shadow-lg transition-shadow cursor-pointer" onclick='showActorModal(${JSON.stringify(actor)})'>
				<img src="${actor.profile_path ? "https://image.tmdb.org/t/p/w500" + actor.profile_path : "https://placehold.co/300x450?text=No+Image"}" class="w-full h-80 object-cover">
					<div class="p-4">
						<h3 class="text-lg font-semibold truncate">${actor.name}</h3>
						<p class="text-sm text-gray-500">${actor.known_for_department || "Actor"}</p>
					</div>
				</div>
        `).join("");
			}
			// ===============================
			// ðŸŽ­ ACTOR MODAL LOGIC
			// ===============================
			async function showActorModal(actor) {
				const modal = document.getElementById("actor-modal");
				const loader = document.getElementById("actor-loading");
				const content = document.getElementById("actor-content");
				modal.classList.remove("hidden");
				modal.classList.add("flex");
				loader.classList.remove("hidden");
				content.classList.add("hidden");
				document.body.style.overflow = "hidden";
				try {
					const response = await fetch(`https://api.themoviedb.org/3/person/${actor.id}?api_key=${TMDB_API_KEY}&append_to_response=combined_credits`);
					if (!response.ok) throw new Error("Failed to fetch actor details");
					const data = await response.json();
					document.getElementById("actor-image").src = data.profile_path ? `https://image.tmdb.org/t/p/w500${data.profile_path}` : "https://placehold.co/300x450?text=No+Image";
					document.getElementById("actor-name").textContent = data.name || "";
					document.getElementById("actor-birth").textContent = data.birthday ? `Born: ${data.birthday}` : "";
					document.getElementById("actor-place").textContent = data.place_of_birth ? `Place of Birth: ${data.place_of_birth}` : "";
					document.getElementById("actor-bio").textContent = data.biography || "No biography available.";
					const known = document.getElementById("actor-known");
					known.innerHTML = "";
					(data.combined_credits?.cast || []).slice(0, 8).forEach(film => {
						const tag = document.createElement("span");
						tag.className = "bg-gray-200 text-gray-800 px-3 py-1 rounded-full text-sm";
						tag.textContent = film.title || film.name;
						known.appendChild(tag);
					});
					loader.classList.add("hidden");
					content.classList.remove("hidden");
				} catch (error) {
					console.error("Actor modal error:", error);
					loader.classList.add("hidden");
					content.classList.remove("hidden");
					document.getElementById("actor-bio").textContent = "Could not load actor information.";
				}
			}
			document.getElementById("close-actor-modal").addEventListener("click", closeActorModal);
			document.getElementById("actor-modal").addEventListener("click", e => {
				if (e.target === e.currentTarget) closeActorModal();
			});

			function closeActorModal() {
				const modal = document.getElementById("actor-modal");
				modal.classList.add("hidden");
				modal.classList.remove("flex");
				document.body.style.overflow = "auto";
			}
			fetchActors();
		</script>
	</body>
</html>